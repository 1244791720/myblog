<!-- md编辑器例子-->
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8" />
    <title>Simple example - Editor.md examples</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/editormd.css" />
    <link rel="shortcut icon" href="https://pandao.github.io/editor.md/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="layout">
    <header>
        <h1>Simple example</h1>
    </header>
    <div id="saveButton"><button class="btn btn-default">保存</button></div>
    <div id="test-editormd">
        <textarea style="display:none;"></textarea>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script src="../js/common.js"></script>
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="../js/editormd.js"></script>
<script type="text/javascript">
    var testEditor;

    $(function() {
        testEditor = editormd("test-editormd", {
            width   : "90%",
            height  : 640,
            syncScrolling : "single",
            path    : "../lib/",
            imageUpload : true,
            imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
            imageUploadURL : "http://localhost:8080/upload",
            crossDomainUpload    : false,          // Enable/disable Cross-domain upload
        });
    });
    $('#test-editormd').bind('input propertychange', function() {
        var content = $('.editormd-markdown-textarea').val()
        console.log(content)
    });

    // 点击保存，存入数据库
    $('#saveButton').click(function () {
        console.log("保存消息")
        let id = getQueryString("id")
        // ajax 存入文章内容
        let content = $('.editormd-markdown-textarea').val()
        let data = {
                    "id":"1",
                    "content":content
        }
        $.ajax({
            url:modifyArticleContent,
            type:"post",
            dataType:"json",
            data:JSON.stringify(data),
            headers: {'Content-Type': 'application/json'},
            success: function (data, status) {
                console.log("data:", data)
                console.log("status:", status)
                if (status === "success") {
                    alert("保存成功")
                }
            }
        })
    })


</script>
</body>
</html>